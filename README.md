# FinSimu - 量化策略開發與分析平台


## 核心功能 ✨

-   **雙核心遺傳演算法引擎**:
    -   **系統 A (28基因)**: 複雜的多策略組合模型，具備市場狀態判斷能力。
    -   **系統 B (10基因)**: 專注於 RSI 和波動率切換的穩健型策略模型。
    -   支援 **NSGA-II 多目標優化**，可同時平衡報酬率、風險、勝率等多個目標。

-   **互動式 Web 平台**:
    -   **使用者認證系統**: 支援註冊、登入，保障個人策略安全。
    -   **即時策略訓練器**: 使用者可自訂股票、時間範圍和 GA 參數，即時訓練並獲得策略模型。
    -   **手動回測工具**: 驗證任何策略基因在近期市場的表現。
    -   **個人策略儀表板**: 儲存、管理和追蹤所有滿意的策略。

-   **Gemini AI 整合**:
    -   **AI 深度分析報告**: 輸入股票代號，即可獲得一份結合即時數據、預訓練策略和 Gemini AI 解讀的綜合分析報告。
    -   **智能新聞搜尋**: 透過 AI 搜尋、總結並分析最新的財經新聞。

-   **自動化排程任務**:
    -   **每日市場情緒分析**: 自動抓取新聞並更新市場情緒分數。
    -   **每日策略信號掃描**: 自動回測所有預訓練策略，篩選出最新的潛在買賣信號。

---

## 系統架構 🏗️

本專案採用「離線訓練 + 線上服務 + 自動化任務」的三層架構：

1.  **離線訓練層 (`offline_trainer_*.py`)**:
    -   **目的**: 進行大規模、高強度的運算，為資料庫建立一個高品質的基礎策略池。
    -   **流程**: 讀取股票清單 -> 針對每支股票執行數十次 GA/NSGA-II 訓練 -> 篩選 Top 3 策略 -> 存入資料庫。

2.  **線上服務層 (`main_app.py`)**:
    -   **目的**: 提供使用者互動介面，並整合各項數據。
    -   **流程**: 接收使用者請求 -> 從 `yfinance` 獲取即時數據 -> 從資料庫讀取預訓練策略 -> 呼叫 `Gemini AI` 生成報告 -> 將結果呈現給使用者。

3.  **自動化任務層 (`APScheduler` in `main_app.py`)**:
    -   **目的**: 讓平台保持「活性」，持續更新情報。
    -   **流程**: 每日定時觸發 -> 執行新聞情緒分析 & 策略信號回測 -> 將結果更新到 CSV 檔案和資料庫中。

---

## 技術棧 🛠️

-   **後端**: Python, Flask, Flask-Login, APScheduler
-   **數據科學**: Pandas, NumPy, Numba, Pandas-TA
-   **AI & 優化**: Google Generative AI (Gemini), Pymoo (NSGA-II)
-   **資料庫**: MySQL / MariaDB
-   **前端**: 原生 HTML, CSS, JavaScript 
-   **圖表**: Plotly

---

